# Chikox Architecture Documentation

## ğŸ›ï¸ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIENT LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Client App     â”‚              â”‚    Admin App     â”‚     â”‚
â”‚  â”‚   (Next.js)      â”‚              â”‚    (Next.js)     â”‚     â”‚
â”‚  â”‚   Port: 3001     â”‚              â”‚   Port: 3002     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                â”‚
            â”‚         HTTP/HTTPS             â”‚
            â”‚                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           â”‚         API LAYER              â”‚               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Fastify API Server                        â”‚   â”‚
â”‚  â”‚           Port: 3000                                â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚ Auth Routes  â”‚    â”‚ User Routes  â”‚   ...      â”‚   â”‚
â”‚  â”‚  â”‚ /api/v1/auth/*  â”‚    â”‚ /api/v1/users/* â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚         â”‚                    â”‚                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   â”‚
â”‚  â”‚  â”‚         Middleware Layer              â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  - JWT Authentication                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  - Role Authorization                 â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  - Error Handling                     â”‚        â”‚   â”‚
â”‚  â”‚  â”‚  - Validation (Zod)                   â”‚        â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   â”‚
â”‚  â”‚                  â”‚                                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚  â”‚      Swagger/OpenAPI          â”‚                â”‚   â”‚
â”‚  â”‚  â”‚      Documentation            â”‚                â”‚   â”‚
â”‚  â”‚  â”‚      /docs                    â”‚                â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚  Prisma Client
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE LAYER                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              PostgreSQL Database                     â”‚   â”‚
â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚   â”‚
â”‚  â”‚  â”‚   Users    â”‚    â”‚  Sessions  â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚            â”‚    â”‚            â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ - id       â”‚    â”‚ - id       â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ - email    â”‚â—„â”€â”€â”€â”¤ - userId   â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ - password â”‚    â”‚ - token    â”‚                  â”‚   â”‚
â”‚  â”‚  â”‚ - role     â”‚    â”‚ - expires  â”‚                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               SHARED PACKAGES LAYER                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   @chikox/   â”‚  â”‚   @chikox/   â”‚  â”‚   @chikox/   â”‚      â”‚
â”‚  â”‚   database   â”‚  â”‚    types     â”‚  â”‚  ui-common   â”‚      â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚      â”‚
â”‚  â”‚ - Prisma     â”‚  â”‚ - Shared TS  â”‚  â”‚ - Shared UI  â”‚      â”‚
â”‚  â”‚   Client     â”‚  â”‚   Interfaces â”‚  â”‚   Components â”‚      â”‚
â”‚  â”‚ - Schema     â”‚  â”‚ - DTOs       â”‚  â”‚ - Hooks      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚   API    â”‚                â”‚ Database â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                            â”‚                           â”‚
     â”‚  POST /auth/login          â”‚                           â”‚
     â”‚  { email, password }       â”‚                           â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
     â”‚                            â”‚  Query User               â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                            â”‚  User Data                â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚  Verify Password          â”‚
     â”‚                            â”‚  (bcrypt.compare)         â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚  Generate JWT Tokens      â”‚
     â”‚                            â”‚  - Access Token (15m)     â”‚
     â”‚                            â”‚  - Refresh Token (7d)     â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚  Create Session           â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                            â”‚                           â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
     â”‚  200 OK                    â”‚                           â”‚
     â”‚  { user, accessToken }     â”‚                           â”‚
     â”‚  Set-Cookie: refreshToken  â”‚                           â”‚
     â”‚  (HttpOnly, Secure)        â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚  Store accessToken         â”‚                           â”‚
     â”‚  in memory/localStorage    â”‚                           â”‚
     â”‚                            â”‚                           â”‚
     â”‚  GET /api/v1/users/me         â”‚                           â”‚
     â”‚  Authorization: Bearer ... â”‚                           â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                           â”‚
     â”‚                            â”‚  Verify JWT               â”‚
     â”‚                            â”‚  Extract userId           â”‚
     â”‚                            â”‚                           â”‚
     â”‚                            â”‚  Query User               â”‚
     â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                            â”‚                           â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
     â”‚  200 OK                    â”‚                           â”‚
     â”‚  { user }                  â”‚                           â”‚
     â”‚                            â”‚                           â”‚
```

## ğŸ“Š Data Flow Architecture

### Request Processing Flow

```
1. Client Request
   â†“
2. Fastify Router
   â†“
3. Middleware Chain
   â”œâ”€ CORS Handler
   â”œâ”€ Cookie Parser
   â”œâ”€ JWT Verification (if protected)
   â”œâ”€ Role Authorization (if required)
   â””â”€ Validation (Zod schemas)
   â†“
4. Route Handler
   â”œâ”€ Business Logic
   â”œâ”€ Prisma Database Operations
   â””â”€ Response Formatting
   â†“
5. Error Handler (if error occurs)
   â†“
6. Response to Client
```

### Type Safety Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         @chikox/types Package               â”‚
â”‚  - LoginRequest                             â”‚
â”‚  - RegisterRequest                          â”‚
â”‚  - AuthResponse                             â”‚
â”‚  - UserDTO                                  â”‚
â”‚  - ApiResponse<T>                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚
      â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Server    â”‚   â”‚   Client    â”‚
â”‚  (Fastify)  â”‚   â”‚  (Next.js)  â”‚
â”‚             â”‚   â”‚             â”‚
â”‚ import type â”‚   â”‚ import type â”‚
â”‚ { LoginReq} â”‚   â”‚ { LoginReq} â”‚
â”‚ from        â”‚   â”‚ from        â”‚
â”‚ '@chikox/   â”‚   â”‚ '@chikox/   â”‚
â”‚  types'     â”‚   â”‚  types'     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ API Endpoints Structure

### Authentication Endpoints

| Method | Endpoint              | Auth Required | Description          |
| ------ | --------------------- | ------------- | -------------------- |
| POST   | /api/v1/auth/register | No            | Register new user    |
| POST   | /api/v1/auth/login    | No            | Login user           |
| POST   | /api/v1/auth/logout   | No            | Logout user          |
| POST   | /api/v1/auth/refresh  | No (Cookie)   | Refresh access token |

### User Endpoints

| Method | Endpoint          | Auth Required | Roles       | Description      |
| ------ | ----------------- | ------------- | ----------- | ---------------- |
| GET    | /api/v1/users/me  | Yes           | Any         | Get current user |
| GET    | /api/v1/users     | Yes           | ADMIN+      | List all users   |
| GET    | /api/v1/users/:id | Yes           | ADMIN+      | Get user by ID   |
| PATCH  | /api/v1/users/:id | Yes           | ADMIN+      | Update user      |
| DELETE | /api/v1/users/:id | Yes           | SUPER_ADMIN | Delete user      |

## ğŸ—‚ï¸ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            User                  â”‚
â”‚  - id (PK)                       â”‚
â”‚  - email (UNIQUE)                â”‚
â”‚  - passwordHash                  â”‚
â”‚  - name                          â”‚
â”‚  - role (ENUM)                   â”‚
â”‚  - createdAt                     â”‚
â”‚  - updatedAt                     â”‚
â”‚  - lastLoginAt                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 1:N
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Session                 â”‚
â”‚  - id (PK)                       â”‚
â”‚  - userId (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  - refreshToken (UNIQUE)  â”‚       â”‚
â”‚  - expiresAt              â”‚       â”‚
â”‚  - userAgent              â”‚       â”‚
â”‚  - ipAddress              â”‚       â”‚
â”‚  - createdAt              â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ Security Architecture

### Password Security

- **Hashing**: bcrypt with 10 salt rounds
- **Never stored** in plain text
- **Compared** securely on login

### JWT Token Security

- **Access Token**:
  - Short-lived (15 minutes)
  - Stored in memory/localStorage
  - Sent in Authorization header
  - Contains: userId, email, role

- **Refresh Token**:
  - Long-lived (7 days)
  - Stored in HttpOnly cookie
  - Cannot be accessed via JavaScript
  - Used to obtain new access tokens

### Cookie Security

- **HttpOnly**: Prevents XSS attacks
- **Secure**: HTTPS only in production
- **SameSite**: Strict policy prevents CSRF

### Route Protection

```typescript
// Middleware chain
[authenticate, authorize('ADMIN')];

// 1. authenticate: Verifies JWT token
// 2. authorize: Checks user role
```

## ğŸ“¦ Package Dependencies Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               apps/server                        â”‚
â”‚  Dependencies:                                   â”‚
â”‚  - @chikox/database                             â”‚
â”‚  - @chikox/types                                â”‚
â”‚  - fastify, @fastify/*                          â”‚
â”‚  - bcryptjs, zod                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               apps/client                        â”‚
â”‚  Dependencies:                                   â”‚
â”‚  - @chikox/types                                â”‚
â”‚  - @chikox/ui-common                            â”‚
â”‚  - next, react, react-dom                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               apps/admin                         â”‚
â”‚  Dependencies:                                   â”‚
â”‚  - @chikox/types                                â”‚
â”‚  - @chikox/ui-common                            â”‚
â”‚  - next, react, react-dom                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             packages/database                    â”‚
â”‚  Dependencies:                                   â”‚
â”‚  - @prisma/client                               â”‚
â”‚  - prisma (devDependency)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              packages/types                      â”‚
â”‚  Dependencies: None (pure TypeScript)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            packages/ui-common                    â”‚
â”‚  Dependencies:                                   â”‚
â”‚  - react, react-dom                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Development Workflow

```
1. Developer makes changes
   â†“
2. TypeScript type checking (automatic)
   â†“
3. ESLint validation (on save/pre-commit)
   â†“
4. Prettier formatting (on save/pre-commit)
   â†“
5. Vitest unit tests (on commit)
   â†“
6. Build verification
   â†“
7. Git commit
   â†“
8. CI/CD Pipeline (if configured)
```

## ğŸš€ Deployment Architecture

### Production Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Load Balancer / CDN            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚
    â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js â”‚    â”‚ Next.js â”‚
â”‚ Client  â”‚    â”‚ Admin   â”‚
â”‚         â”‚    â”‚         â”‚
â”‚ (Vercel/â”‚    â”‚ (Vercel/â”‚
â”‚  AWS)   â”‚    â”‚  AWS)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚              â”‚
     â”‚    API Calls â”‚
     â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Fastify API â”‚
    â”‚   Server      â”‚
    â”‚               â”‚
    â”‚   (AWS EC2/   â”‚
    â”‚    Heroku/    â”‚
    â”‚    Railway)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PostgreSQL   â”‚
    â”‚  Database     â”‚
    â”‚               â”‚
    â”‚  (AWS RDS/    â”‚
    â”‚   Supabase/   â”‚
    â”‚   Railway)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ Scalability Considerations

1. **Horizontal Scaling**: Multiple API server instances behind load balancer
2. **Database Connection Pooling**: Prisma connection pool configuration
3. **Caching**: Redis for session storage (future enhancement)
4. **CDN**: Static assets served via CDN
5. **Microservices**: Monorepo structure allows easy service extraction

## ğŸ§ª Testing Strategy

### Unit Tests

- Route handler logic
- Utility functions
- Component rendering

### Integration Tests

- API endpoint flows
- Database operations
- Authentication flows

### E2E Tests (Future)

- Complete user workflows
- Cross-application testing
